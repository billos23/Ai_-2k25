# A* Sokoban Solver

Υλοποίηση του αλγορίθμου αναζήτησης A* για την επίλυση παζλ Sokoban.

## Τι είναι το Sokoban;

Το Sokoban είναι ένα κλασικό παιχνίδι παζλ όπου σπρώχνετε κιβώτια σε θέσεις-στόχους μέσα σε μια αποθήκη. Ο παίκτης μπορεί μόνο να σπρώχνει κιβώτια (όχι να τα τραβάει), και μόνο ένα κιβώτιο τη φορά. Στόχος είναι να τοποθετηθούν όλα τα κιβώτια στις θέσεις-στόχους.

## Χαρακτηριστικά

- **Αλγόριθμος A***: Βέλτιστη εύρεση διαδρομής με admissible ευρετικές
- **Δύο Ευρετικές Συναρτήσεις**:
  - Manhattan Distance: Άθροισμα αποστάσεων από κιβώτια σε πλησιέστερους στόχους
  - Simple: Πλήθος κιβωτίων που δεν είναι σε στόχους
- **Φόρτωση Επιπέδων**: Ανάγνωση αρχείων .sok format
- **10 Επίπεδα Sokoban**: Συλλογή Medium του Aymeric du Peloux
- **Διαδραστική Διεπαφή**: Επιλογή επιπέδων, ευρετικών, προβολή λύσεων

## Απαιτήσεις Συστήματος

### Λογισμικό
- **Python 3.x** (συνιστάται έκδοση 3.7 ή νεότερη)
- Καμία εξωτερική βιβλιοθήκη δεν απαιτείται (χρησιμοποιείται μόνο η standard library)
- Προαιρετικά: `psutil` για παρακολούθηση μνήμης

### Λειτουργικό Σύστημα
- Windows, Linux, macOS
- Οποιοδήποτε σύστημα που υποστηρίζει Python 3.x

## Εγκατάσταση

### 1. Εγκατάσταση Python

#### Windows
1. Κατεβάστε το Python από το [python.org](https://www.python.org/downloads/)
2. Εκτελέστε το installer
3. **Σημαντικό**: Επιλέξτε "Add Python to PATH" κατά την εγκατάσταση
4. Επαληθεύστε την εγκατάσταση:
   ```cmd
   python --version
   ```

#### Linux
```bash
# Debian/Ubuntu
sudo apt update
sudo apt install python3

# Fedora
sudo dnf install python3

# Επαλήθευση
python3 --version
```

#### macOS
```bash
# Χρησιμοποιώντας Homebrew
brew install python3

# Επαλήθευση
python3 --version
```

### 2. Προαιρετική Εγκατάσταση psutil

Για παρακολούθηση χρήσης μνήμης (προαιρετικό):

```bash
pip install psutil
```

## Μεταγλώττιση

**Η Python είναι interpreted γλώσσα - δεν απαιτείται μεταγλώττιση!**

Τα αρχεία `.py` εκτελούνται απευθείας από τον Python interpreter. Η Python δημιουργεί αυτόματα bytecode files (`.pyc`) στους φακέλους `__pycache__/` κατά την πρώτη εκτέλεση για ταχύτερη φόρτωση.

## Εκτέλεση

### Κύρια Εφαρμογή

#### Windows
```cmd
python main.py
```

#### Linux/macOS
```bash
python3 main.py
```

### Διαδραστικό Μενού

Μετά την εκτέλεση, θα εμφανιστεί το ακόλουθο μενού:

```
=== A* Sokoban Solver ===
1. Load level from file
2. Run test puzzle
3. Exit
```

#### Επιλογή 1: Φόρτωση Επιπέδου από Αρχείο
1. Επιλέξτε `1`
2. Εισάγετε το path του αρχείου (π.χ. `levels/Aymeric_Medium.sok`)
3. Επιλέξτε αριθμό επιπέδου (1-10)
4. Επιλέξτε ευρετική:
   - `1` για Manhattan Distance (συνιστάται)
   - `2` για Simple Heuristic

#### Επιλογή 2: Εκτέλεση Δοκιμαστικού Παζλ
Εκτελεί ένα απλό 2-κινήσεων παζλ για επαλήθευση της λειτουργίας.

### Παράδειγμα Εκτέλεσης

```
Enter choice: 1
Enter .sok file path: levels/Aymeric_Medium.sok
Enter level number (1-10): 1
Select heuristic:
1. Manhattan Distance (recommended)
2. Simple Heuristic
Enter choice: 1

Solving level 1...
Initial state:
#####
#@$.#
#####

Solution found!
Moves: R
Total moves: 1
States explored: 3
Time: 0.001s
```

## Συμβολισμός Sokoban

- `#` = Τοίχος
- `@` = Παίκτης
- `$` = Κιβώτιο
- `.` = Στόχος
- `*` = Κιβώτιο σε στόχο
- `+` = Παίκτης σε στόχο
- ` ` = Κενός χώρος

## Δομή Project

```
AiAskisi1/
├── main.py                          # Κύριο πρόγραμμα
├── test_sokoban.py                  # Δοκιμαστικό script
├── levels/
│   └── Aymeric_Medium.sok          # 10 επίπεδα Sokoban
└── a_star_solver/
    ├── puzzles/
    │   ├── base_puzzle.py          # Αφηρημένη διεπαφή παζλ
    │   ├── sokoban_puzzle.py       # Αναπαράσταση κατάστασης Sokoban
    │   └── sokoban_loader.py       # Parser αρχείων επιπέδων
    └── solver/
        ├── a_star.py               # Πυρήνας αλγορίθμου A*
        ├── heuristic_base.py       # Αφηρημένη κλάση ευρετικών
        ├── sokoban_heuristics.py   # Ευρετικές για Sokoban
        └── solution_result.py      # Δομή αποτελεσμάτων
```

## Δοκιμές

Εκτελέστε το δοκιμαστικό script για επαλήθευση:

#### Windows
```cmd
python test_sokoban.py
```

#### Linux/macOS
```bash
python3 test_sokoban.py
```

Αυτό δοκιμάζει ένα τετριμμένο παζλ 2 κινήσεων για να διασφαλίσει ότι όλα λειτουργούν σωστά.

## Παράμετροι και Όρια

Το πρόγραμμα έχει προεπιλεγμένα όρια που μπορούν να τροποποιηθούν στον κώδικα:

- **Μέγιστες καταστάσεις**: 200,000 (στο `a_star.py`)
- **Χρονικό όριο**: 60 δευτερόλεπτα (στο `a_star.py`)
- **Όριο μνήμης**: 512 MB

Για να αλλάξετε αυτά τα όρια, επεξεργαστείτε το αρχείο `a_star_solver/solver/a_star.py`.

## Σημειώσεις Απόδοσης

Τα συμπεριλαμβανόμενα επίπεδα είναι μεσαίας δυσκολίας και απαιτούν 69-178 βέλτιστες κινήσεις. Είναι προκλητικά για βασικό A* με απλές ευρετικές:

- **Αναμενόμενη συμπεριφορά**: Μπορεί να φτάσει το όριο καταστάσεων πριν βρει λύση
- **Γιατί**: Το Sokoban είναι PSPACE-complete με τεράστιους χώρους αναζήτησης

Η υλοποίηση είναι σωστή και βρίσκει βέλτιστες λύσεις για απλούστερα παζλ. Για να λυθούν τα συμπεριλαμβανόμενα επίπεδα, θα χρειαζόταν:
- Πιο εξελιγμένες ευρετικές (pattern databases, goal room detection)
- Καλύτερη ανίχνευση deadlocks (freeze deadlocks, corral deadlocks)
- Μεγαλύτερα όρια καταστάσεων (100,000+)
- Περισσότερος χρόνος (λεπτά αντί για δευτερόλεπτα)

## Λεπτομέρειες Αλγορίθμου

### Αναζήτηση A*
- Χρησιμοποιεί priority queue για εξερεύνηση καταστάσεων με χαμηλότερο f(n) = g(n) + h(n)
- g(n) = πραγματικό κόστος από την αρχή
- h(n) = ευρετική εκτίμηση μέχρι τον στόχο
- Εγγυάται βέλτιστη λύση όταν η ευρετική είναι admissible

### Ευρετικές Συναρτήσεις
Και οι δύο ευρετικές είναι admissible (δεν υπερεκτιμούν ποτέ):
- **Manhattan Distance**: Πιο ενημερωτική, συνήθως ταχύτερη
- **Simple**: Λιγότερο ενημερωτική, εξερευνά περισσότερες καταστάσεις

### Ανίχνευση Deadlocks
Αποτρέπει το σπρώξιμο κιβωτίων σε μη-επιλύσιμες θέσεις:
- Corner deadlocks: Κιβώτιο σε γωνία που δεν είναι στόχος
- Συντηρητική προσέγγιση για αποφυγή ψευδών θετικών

## Επίπεδα

Τα 10 συμπεριλαμβανόμενα επίπεδα από τη συλλογή του Aymeric du Peloux:

1. Nabokosmos 15 (97 κινήσεις)
2. Nabokosmos 20 (148 κινήσεις)
3. Nabokosmos 14 (104 κινήσεις)
4. Nabokosmos 30 (113 κινήσεις)
5. Nabokosmos 40 (171 κινήσεις)
6. Nabokosmos 29 (136 κινήσεις)
7. Nabokosmos 35 (178 κινήσεις)
8. Nabokosmos 38 (69 κινήσεις)
9. Nabokosmos 33 (110 κινήσεις)
10. Nabokosmos 31 (113 κινήσεις)

## Αντιμετώπιση Προβλημάτων

### "Python is not recognized as an internal or external command"
- Βεβαιωθείτε ότι η Python είναι εγκατεστημένη
- Προσθέστε την Python στο PATH των μεταβλητών περιβάλλοντος

### "No module named 'a_star_solver'"
- Βεβαιωθείτε ότι εκτελείτε το `main.py` από τον ριζικό κατάλογο του project
- Ελέγξτε ότι υπάρχει το αρχείο `a_star_solver/__init__.py`

### "File not found" κατά τη φόρτωση επιπέδου
- Ελέγξτε το path του αρχείου .sok
- Χρησιμοποιήστε σχετικό path από τον ριζικό κατάλογο (π.χ. `levels/Aymeric_Medium.sok`)

### Το πρόγραμμα δεν βρίσκει λύση
- Τα μεσαία επίπεδα είναι δύσκολα - μπορεί να χρειαστεί αύξηση των ορίων
- Δοκιμάστε το Manhattan Distance heuristic (είναι πιο αποδοτικό)
- Ορισμένα επίπεδα μπορεί να μην λυθούν με τα βασικά heuristics

## Δομή Εξόδου

Μετά την επιτυχή επίλυση, το πρόγραμμα εμφανίζει:

1. **Αρχική κατάσταση**: Το παζλ πριν την επίλυση
2. **Λύση**: Ακολουθία κινήσεων (U=Up, D=Down, L=Left, R=Right)
3. **Στατιστικά**:
   - Συνολικές κινήσεις
   - Καταστάσεις που εξερευνήθηκαν
   - Χρόνος εκτέλεσης
   - Χρήση μνήμης (αν υπάρχει psutil)
   - Σύγκριση με βέλτιστη λύση (αν είναι διαθέσιμη)

